@model IEnumerable<{{ datans }}.Entities.{{ name }}>

@{
    ViewData["Title"] = "{{ plural }}";
    var colCount = ViewBag.SortColumns.Count;
}

<h1>{{ displaynameplural }}</h1>
<div class="table-comment">{{ comment }} &nbsp;</div>
<div class="small">Table: <strong>{{ tablename }}</strong></div>

<div class="content">
    <div><a asp-action="Create" class="link-button">Add {{ displayname }}</a></div>

    <form method="post" asp-action="Sort" class="sort-form">
        @Html.DropDownList("SortColumns")
        @Html.DropDownList("SortOrder")
        <input type="submit" value="Apply Sort" class="success" />
    </form>

    <table class="table">
        <thead>
            <tr>
                <th></th>
                {{ #columns }}
                <th>
                    <a asp-action="Sort" asp-route-field="{{ displayname }}">
                        @Html.DisplayNameFor(model => model.{{ propertyname }})
                    </a>
                </th>
                {{ /columns }}
            </tr>
        </thead>
        <tbody>
            @if (Model.Count() == 0)
            {
                <tr><td>&nbsp;</td><td colspan="@colCount">Nothing to show.</td></tr>
            }
            else
            {
                foreach (var item in Model) {
                    <tr>
                        <td>
                            <a asp-action="Edit" class="success" asp-route-id="@item.Id">Edit</a>
                            <a asp-action="Delete" class="danger" asp-route-id="@item.Id">Delete</a>
                        </td>
                        {{ #columns }}
                        <td>
                            @Html.DisplayFor(modelItem => item.{{ propertyname }})
                        </td>
                        {{ /columns }}
                    </tr>
                }
                await Html.RenderPartialAsync("_Pager", ({{ webns }}.Models.PagerData)ViewBag.PagerData);
            }
        </tbody>
    </table>

    <div><a asp-action="Create" class="link-button">Add {{ displayname }}</a></div>
</div>
